<html>
	<head>
		<title>FreewayData</title>
		<link href="/static/style.css" rel="stylesheet" type="text/css"/>
		<script src="/mapreduce/jquery.js" type="text/javascript"></script>
		<script src="/static/custom.js" type="text/javascript"></script>
	</head>
	<body>
		<div>
			<!-- File upload form -->
			<form action="{{ upload_url }}" method="post"
				enctype="multipart/form-data">
				<h3>Upload files to the Blobstore</h3>
				<label for="file">Filename:</label>
				<input type="file" name="file" id="file"/>
				<br>
				<input type="submit" name="submit" value="Upload"/>
			</form>
			<hr>
			<!-- Display uploaded files, and allow for import into Datastore -->
			<div>
				<h3>Import files from Blobstore to Datastore</h3>
				<p>highways.csv, freeway_stations.csv, and freeway_detectors.csv can be imported to Datastore</p>
				{% if file_count %}
				<table border=1>
					<tr>
						<th></th>
						<th>name</th>
						<th>uploaded on</th>
						<th>content type</th>
						<th>md5</th>
						<th>blobkey</th>
						<th>size</th>
					</tr>
					{% for file in files %}
					<tr>
						<td><input type="radio" name="file_radio" onclick="updateImportForm('{{ file.blobkey }}','{{ file.blobkey }}','{{ file.filename }}');"></td>
						<td><a href="/file/{{ file.blobkey }}/download">{{ file.filename }}</a></td>
						<td>{{ file.creation }}</td>
						<td>{{ file.content_type }}</td>
						<td>{{ file.md5_hash }}</td>
						<td>{{ file.blobkey }}</td>
						<td>{{ file.size }}</td>
					</tr>
					{% endfor %}
				</table>
				<br>
				<form action="/import" method="post">
					Input File: <label id="fileName">none selected</label>
					<input type="hidden" name="filekey" id="filekey" value=""/>
					<input type="hidden" name="blobkey" id="blobkey" value=""/>
					<br/>
					<input type="submit" id="import" name="import" value="Import" disabled="true"/>
				</form>
				{% else %}
				<div>No files uploaded yet!</div>
				{% endif %}
			</div>
			<hr/>
		</div>
	</body>
</html>
